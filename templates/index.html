<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>‚öõÔ∏è Physics Lab - Advanced Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js@2.26.0/dist/plotly.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Mobile Header with Menu Button -->
        <div class="mobile-header">
            <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleSidebar()">‚ò∞</button>
            <h1 class="mobile-title">‚öõÔ∏è Physics Lab</h1>
            <button class="theme-toggle" id="themeToggle">üåô</button>
        </div>
        
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">‚öõÔ∏è Physics Lab</h1>
                <div class="header-buttons">
                    <button class="theme-toggle" id="themeToggle2">üåô</button>
                    <button class="minimize-btn" id="minimizeBtn" onclick="toggleSidebar()">‚óÄ</button>
                </div>
            </div>
            
            <div class="nav-section">
                <h3>Modules</h3>
                <button class="nav-btn" data-emoji="üè†" onclick="loadModule('home')">üè† Home</button>
                <button class="nav-btn" data-emoji="üìç" onclick="loadModule('kinematics')">üìç Kinematics</button>
                <button class="nav-btn" data-emoji="‚ö°" onclick="loadModule('ohms')">‚ö° Ohm's Law</button>
                <button class="nav-btn" data-emoji="‚ö°" onclick="loadModule('energy')">‚ö° Energy</button>
                <button class="nav-btn" data-emoji="üí´" onclick="loadModule('momentum')">üí´ Momentum</button>
                <button class="nav-btn" data-emoji="üîç" onclick="loadModule('optics')">üîç Optics</button>
                <button class="nav-btn" data-emoji="üå°Ô∏è" onclick="loadModule('thermo')">üå°Ô∏è Thermodynamics</button>
                <button class="nav-btn" data-emoji="üîÑ" onclick="loadModule('circular')">üîÑ Circular Motion</button>
                <button class="nav-btn" data-emoji="üöÄ" onclick="loadModule('projectile')">üöÄ Projectile Motion</button>
                <button class="nav-btn" data-emoji="„Ä∞Ô∏è" onclick="loadModule('shm')">„Ä∞Ô∏è Simple Harmonic</button>
                <button class="nav-btn" data-emoji="‚öõÔ∏è" onclick="loadModule('electrostatics')">‚öõÔ∏è Electrostatics</button>
                <button class="nav-btn" data-emoji="üßÆ" onclick="loadModule('calculator')">üßÆ Sci Calculator</button>
            </div>
            
            <div class="nav-section">
                <h3>Tools</h3>
                <button class="nav-btn secondary" data-emoji="üîÑ" onclick="loadModule('converter')">üîÑ Unit Converter</button>
                <button class="nav-btn secondary" data-emoji="üìä" onclick="showHistory()">üìä History</button>
                <button class="nav-btn secondary" data-emoji="üìã" onclick="showFormulas()">üìã Formulas</button>
                <button class="nav-btn secondary" data-emoji="üóëÔ∏è" onclick="clearHistory()">üóëÔ∏è Clear</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <!-- Home Page -->
            <div id="home" class="module-view">
                <div class="welcome-header">
                    <h1>Welcome to Physics Lab v2.0</h1>
                    <p class="subtitle">Advanced Physics Calculations & Visualizations</p>
                </div>
                
                <div class="info-grid">
                    <div class="info-card">
                        <h3>üî¨ What is Physics?</h3>
                        <p>Physics is the natural science studying matter, energy, motion, and forces. This lab provides interactive tools to solve problems across 11 fundamental physics areas.</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>üìö 11 Modules</h3>
                        <p>From basic kinematics to advanced electrostatics, explore comprehensive physics calculations with visual graphs and step-by-step solutions.</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>üìä Instant Graphs</h3>
                        <p>Every calculation generates interactive graphs and visualizations to help you understand relationships between variables.</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>üíæ Auto-Save</h3>
                        <p>All calculations are automatically saved to your history for easy reference and comparison.</p>
                    </div>
                </div>
                
                <div class="features-section">
                    <h2>Key Features</h2>
                    <ul class="features-list">
                        <li>‚úì Real-time calculations with instant results</li>
                        <li>‚úì Interactive graph visualizations</li>
                        <li>‚úì Comprehensive formulas reference</li>
                        <li>‚úì Full calculation history with search</li>
                        <li>‚úì Responsive design for all devices</li>
                        <li>‚úì Dark/Light theme support</li>
                    </ul>
                </div>
            </div>

            <!-- Kinematics Module -->
            <div id="kinematics" class="module-view">
                <h2>üìç Kinematics Calculator</h2>
                <p class="module-desc">Analyze motion using equations of motion. Enter known values:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Initial Velocity (u) m/s</label>
                        <input type="number" id="kin_u" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Acceleration (a) m/s¬≤</label>
                        <input type="number" id="kin_a" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Time (t) s</label>
                        <input type="number" id="kin_t" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Displacement (s) m</label>
                        <input type="number" id="kin_s" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Final Velocity (v) m/s</label>
                        <input type="number" id="kin_v" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('kinematics')">Calculate</button>
                <div id="kin_results" class="results-section"></div>
                <div id="kin_graph" class="graph-container"></div>
            </div>

            <!-- Ohm's Law Module -->
            <div id="ohms" class="module-view">
                <h2>‚ö° Ohm's Law Calculator</h2>
                <p class="module-desc">Analyze electrical circuits:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Voltage (V) Volts</label>
                        <input type="number" id="ohm_V" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Current (I) Amperes</label>
                        <input type="number" id="ohm_I" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Resistance (R) Ohms</label>
                        <input type="number" id="ohm_R" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('ohms')">Calculate</button>
                <div id="ohm_results" class="results-section"></div>
                <div id="ohm_graph" class="graph-container"></div>
            </div>

            <!-- Energy Module -->
            <div id="energy" class="module-view">
                <h2>‚ö° Energy Calculator</h2>
                <p class="module-desc">Calculate kinetic and potential energy:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Mass (m) kg</label>
                        <input type="number" id="ener_m" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Velocity (v) m/s</label>
                        <input type="number" id="ener_v" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Height (h) m</label>
                        <input type="number" id="ener_h" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Gravity (g) m/s¬≤</label>
                        <input type="number" id="ener_g" placeholder="9.8" step="0.1" value="9.8">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('energy')">Calculate</button>
                <div id="ener_results" class="results-section"></div>
                <div id="ener_graph" class="graph-container"></div>
            </div>

            <!-- Momentum Module -->
            <div id="momentum" class="module-view">
                <h2>üí´ Momentum Calculator</h2>
                <p class="module-desc">Analyze momentum and collisions:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Mass 1 (m1) kg</label>
                        <input type="number" id="mom_m1" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Velocity 1 (v1) m/s</label>
                        <input type="number" id="mom_v1" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Mass 2 (m2) kg</label>
                        <input type="number" id="mom_m2" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Velocity 2 (v2) m/s</label>
                        <input type="number" id="mom_v2" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('momentum')">Calculate</button>
                <div id="mom_results" class="results-section"></div>
                <div id="mom_graph" class="graph-container"></div>
            </div>

            <!-- Optics Module -->
            <div id="optics" class="module-view">
                <h2>üîç Optics Calculator</h2>
                <p class="module-desc">Analyze lens and mirror systems:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Focal Length (f) cm</label>
                        <input type="number" id="opt_f" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Object Distance (u) cm</label>
                        <input type="number" id="opt_u" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Image Distance (v) cm</label>
                        <input type="number" id="opt_v" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('optics')">Calculate</button>
                <div id="opt_results" class="results-section"></div>
                <div id="opt_graph" class="graph-container"></div>
            </div>

            <!-- Thermodynamics Module -->
            <div id="thermo" class="module-view">
                <h2>üå°Ô∏è Thermodynamics Calculator</h2>
                <p class="module-desc">Calculate heat transfer:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Mass (m) kg</label>
                        <input type="number" id="therm_m" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Specific Heat (c) J/kg¬∞C</label>
                        <input type="number" id="therm_c" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Temperature Change (ŒîT) ¬∞C</label>
                        <input type="number" id="therm_dt" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('thermo')">Calculate</button>
                <div id="therm_results" class="results-section"></div>
                <div id="therm_graph" class="graph-container"></div>
            </div>

            <!-- Circular Motion Module -->
            <div id="circular" class="module-view">
                <h2>üîÑ Circular Motion Calculator</h2>
                <p class="module-desc">Analyze circular motion:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Mass (m) kg</label>
                        <input type="number" id="circ_m" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Velocity (v) m/s</label>
                        <input type="number" id="circ_v" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Radius (r) m</label>
                        <input type="number" id="circ_r" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Angular Velocity (œâ) rad/s</label>
                        <input type="number" id="circ_omega" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('circular')">Calculate</button>
                <div id="circ_results" class="results-section"></div>
                <div id="circ_graph" class="graph-container"></div>
            </div>

            <!-- Projectile Motion Module -->
            <div id="projectile" class="module-view">
                <h2>üöÄ Projectile Motion Calculator</h2>
                <p class="module-desc">Analyze projectile trajectories:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Initial Velocity (v‚ÇÄ) m/s</label>
                        <input type="number" id="proj_v0" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Angle (Œ∏) degrees</label>
                        <input type="number" id="proj_theta" placeholder="45" step="0.1" value="45">
                    </div>
                    <div class="input-group">
                        <label>Gravity (g) m/s¬≤</label>
                        <input type="number" id="proj_g" placeholder="9.8" step="0.1" value="9.8">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('projectile')">Calculate</button>
                <div id="proj_results" class="results-section"></div>
                <div id="proj_graph" class="graph-container"></div>
            </div>

            <!-- SHM Module -->
            <div id="shm" class="module-view">
                <h2>„Ä∞Ô∏è Simple Harmonic Motion Calculator</h2>
                <p class="module-desc">Analyze oscillations:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Mass (m) kg</label>
                        <input type="number" id="shm_m" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Spring Constant (k) N/m</label>
                        <input type="number" id="shm_k" placeholder="0" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>Amplitude (A) m</label>
                        <input type="number" id="shm_A" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('shm')">Calculate</button>
                <div id="shm_results" class="results-section"></div>
                <div id="shm_graph" class="graph-container"></div>
            </div>

            <!-- Electrostatics Module -->
            <div id="electrostatics" class="module-view">
                <h2>‚öõÔ∏è Electrostatics Calculator</h2>
                <p class="module-desc">Apply Coulomb's Law:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Charge 1 (q‚ÇÅ) C</label>
                        <input type="number" id="elec_q1" placeholder="0" step="0.01e-9">
                    </div>
                    <div class="input-group">
                        <label>Charge 2 (q‚ÇÇ) C</label>
                        <input type="number" id="elec_q2" placeholder="0" step="0.01e-9">
                    </div>
                    <div class="input-group">
                        <label>Distance (r) m</label>
                        <input type="number" id="elec_r" placeholder="0" step="0.1">
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="calculate('electrostatics')">Calculate</button>
                <div id="elec_results" class="results-section"></div>
                <div id="elec_graph" class="graph-container"></div>
            </div>

            <!-- Scientific Calculator -->
            <div id="calculator" class="module-view">
                <h2>üßÆ Scientific Calculator</h2>
                <p class="module-desc">Advanced mathematical operations:</p>
                
                <div class="calc-display">
                    <input type="text" id="calc_display" readonly>
                </div>
                
                <div class="calc-buttons">
                    <button onclick="appendCalc('7')">7</button>
                    <button onclick="appendCalc('8')">8</button>
                    <button onclick="appendCalc('9')">9</button>
                    <button onclick="appendCalc('/')" class="op">√∑</button>
                    <button onclick="appendCalc('4')">4</button>
                    <button onclick="appendCalc('5')">5</button>
                    <button onclick="appendCalc('6')">6</button>
                    <button onclick="appendCalc('*')" class="op">√ó</button>
                    <button onclick="appendCalc('1')">1</button>
                    <button onclick="appendCalc('2')">2</button>
                    <button onclick="appendCalc('3')">3</button>
                    <button onclick="appendCalc('-')" class="op">‚àí</button>
                    <button onclick="appendCalc('0')">0</button>
                    <button onclick="appendCalc('.')">.</button>
                    <button onclick="calculateCalc()" class="equals">=</button>
                    <button onclick="appendCalc('+')" class="op">+</button>
                    <button onclick="clearCalc()" class="clear">C</button>
                    <button onclick="appendCalc('sin(')" class="func">sin</button>
                    <button onclick="appendCalc('cos(')" class="func">cos</button>
                    <button onclick="appendCalc('sqrt(')" class="func">‚àö</button>
                </div>
                
                <div id="calc_results" class="results-section"></div>
            </div>

            <!-- Unit Converter Module -->
            <div id="converter" class="module-view">
                <h2>üîÑ Unit Converter</h2>
                <p class="module-desc">Convert between different unit systems:</p>
                
                <div class="calculator-grid">
                    <div class="input-group">
                        <label>Conversion Type</label>
                        <select id="conv_type" onchange="updateConverterUnits()">
                            <option value="speed">Speed (m/s, km/h, mph, ft/s, knots)</option>
                            <option value="mass">Mass (kg, g, mg, lb, oz)</option>
                            <option value="distance">Distance (m, cm, mm, km, ft, in, mile)</option>
                            <option value="energy">Energy (J, kJ, MJ, cal, kcal, eV, Wh)</option>
                            <option value="voltage">Voltage (V, kV, mV, ŒºV)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Value to Convert</label>
                        <input type="number" id="conv_value" placeholder="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>From Unit</label>
                        <select id="conv_from"></select>
                    </div>
                    <div class="input-group">
                        <label>To Unit</label>
                        <select id="conv_to"></select>
                    </div>
                </div>
                
                <button class="btn-calculate" onclick="convertUnits()">Convert</button>
                <div id="conv_results" class="results-section"></div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="historyModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Calculation History</h2>
                <button class="close-btn" onclick="closeModal('historyModal')">&times;</button>
            </div>
            <div id="historyContent" class="modal-body"></div>
        </div>
    </div>

    <div id="formulasModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Physics Formulas</h2>
                <button class="close-btn" onclick="closeModal('formulasModal')">&times;</button>
            </div>
            <div id="formulasContent" class="modal-body"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
